<!-- public/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SinePatre — Resource Navigator</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap");

    :root{
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: rgba(15, 23, 42, 0.64);
      --border: rgba(15, 23, 42, 0.10);
      --shadow: 0 16px 40px rgba(15, 23, 42, 0.08);

      --accent: #1f3a7a;
      --accentHover: #172f63;

      --dangerBg: rgba(185, 28, 28, 0.08);
      --dangerBorder: rgba(185, 28, 28, 0.22);
      --dangerText: #b91c1c;
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      font-family: "EB Garamond", Georgia, serif;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 70% -20%, rgba(31,58,122,0.09), transparent 55%),
        radial-gradient(900px 650px at -10% 120%, rgba(31,58,122,0.07), transparent 60%),
        var(--bg);
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(246, 247, 251, 0.82);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(15, 23, 42, 0.06);
    }

    .topbarInner{
      width: min(980px, 100%);
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand{
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 200px;
    }

    .brand small{
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color: rgba(15, 23, 42, 0.55);
      font-size: 12px;
    }
    .brand strong{
      font-size: 16px;
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    .topActions{
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn{
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      padding: 9px 12px;
      border-radius: 12px;
      font-size: 14px;
      cursor: pointer;
      transition: background 140ms ease, transform 140ms ease, border-color 140ms ease;
      user-select: none;
      font-family: "EB Garamond", Georgia, serif;
    }
    .btn:hover{ background: rgba(15, 23, 42, 0.03); transform: translateY(-1px); }
    .btn.primary{
      background: var(--accent);
      border-color: rgba(31, 58, 122, 0.18);
      color: #fff;
    }
    .btn.primary:hover{ background: var(--accentHover); }
    .btn.danger{
      background: var(--dangerBg);
      border-color: var(--dangerBorder);
      color: var(--dangerText);
      font-weight: 600;
    }

    .wrap{
      width: min(980px, 100%);
      margin: 0 auto;
      padding: 26px 18px 120px;
    }

    .hero{
      background: var(--card);
      border: 1px solid rgba(15, 23, 42, 0.08);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 20px 18px;
    }

    .heroTop{
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    h1{
      margin: 0;
      font-size: 28px;
      font-weight: 600;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }

    .oneLine{
      margin: 6px 0 0 0;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.5;
      max-width: 720px;
    }

    .controls{
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
      align-items: end;
    }

    .field{
      display: flex;
      flex-direction: column;
      gap: 6px;
      text-align: left;
    }

    label{
      font-size: 13px;
      color: rgba(15, 23, 42, 0.62);
    }

    input{
      border: 1px solid rgba(15, 23, 42, 0.12);
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 15px;
      background: #fff;
      outline: none;
      font-family: "EB Garamond", Georgia, serif;
    }
    input:focus{
      border-color: rgba(31, 58, 122, 0.38);
      box-shadow: 0 0 0 3px rgba(31, 58, 122, 0.10);
    }

    .messages{
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .msgRow{
      display: flex;
      gap: 10px;
    }
    .msgRow.user{ justify-content: flex-end; }
    .msgRow.assistant{ justify-content: flex-start; }

    .bubble{
      max-width: min(760px, 96%);
      border-radius: 16px;
      border: 1px solid rgba(15, 23, 42, 0.10);
      padding: 10px 12px;
      background: #fff;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.06);
    }
    .bubble.user{
      background: rgba(31, 58, 122, 0.10);
      border-color: rgba(31, 58, 122, 0.18);
    }

    .meta{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      font-size: 12px;
      color: rgba(15, 23, 42, 0.55);
      margin-bottom: 6px;
    }

    .content{
      font-size: 15px;
      line-height: 1.55;
      white-space: pre-wrap;
      overflow-wrap: anywhere;
    }

    .cards{
      margin-top: 10px;
      display: grid;
      gap: 10px;
    }

    .card{
      border: 1px solid rgba(15, 23, 42, 0.10);
      border-radius: 16px;
      padding: 12px 12px;
      background: #fff;
    }

    .cardTitle{
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .cardTitle a{
      color: var(--accent);
      text-decoration: none;
      font-weight: 700;
      font-size: 16px;
    }
    .cardTitle a:hover{ text-decoration: underline; }

    .howToStart{
      margin-top: 8px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .pill{
      border: 1px solid rgba(15, 23, 42, 0.12);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 13px;
      color: rgba(15, 23, 42, 0.80);
      background: rgba(15, 23, 42, 0.02);
    }

    .why{
      margin-top: 8px;
      color: rgba(15, 23, 42, 0.86);
      font-size: 14px;
      line-height: 1.55;
      white-space: pre-wrap;
    }

    .moreRow{
      margin-top: 8px;
      display: flex;
      justify-content: flex-end;
    }
    .linkBtn{
      border: 0;
      background: transparent;
      color: rgba(31, 58, 122, 0.92);
      cursor: pointer;
      font-size: 14px;
      font-family: "EB Garamond", Georgia, serif;
      padding: 0;
    }
    .linkBtn:hover{ text-decoration: underline; }

    .composerWrap{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(246, 247, 251, 0.90);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(15, 23, 42, 0.08);
      padding: 14px 0 18px;
    }

    .composer{
      width: min(980px, 100%);
      margin: 0 auto;
      padding: 0 18px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: end;
    }

    textarea{
      width: 100%;
      border: 1px solid rgba(15, 23, 42, 0.12);
      border-radius: 16px;
      padding: 12px 12px;
      font-size: 15px;
      line-height: 1.5;
      resize: none;
      min-height: 46px;
      max-height: 140px;
      font-family: "EB Garamond", Georgia, serif;
      outline: none;
      background: #fff;
    }
    textarea:focus{
      border-color: rgba(31, 58, 122, 0.38);
      box-shadow: 0 0 0 3px rgba(31, 58, 122, 0.10);
    }
    textarea::placeholder{ color: rgba(15, 23, 42, 0.48); }

    .sendBtn{
      width: 46px;
      height: 46px;
      border-radius: 14px;
      border: 1px solid rgba(31, 58, 122, 0.18);
      background: var(--accent);
      color: #fff;
      cursor: pointer;
      transition: transform 140ms ease, background 140ms ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }
    .sendBtn:hover{ transform: translateY(-1px); background: var(--accentHover); }
    .sendBtn:disabled{ opacity: 0.55; cursor: not-allowed; transform: none; }

    .sendBtn svg{
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2.2;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    /* Modal */
    .modalOverlay{
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.36);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 50;
    }
    .modalOverlay.open{ display: flex; }

    .modal{
      width: min(760px, 100%);
      border-radius: 18px;
      background: #fff;
      border: 1px solid rgba(15, 23, 42, 0.10);
      box-shadow: 0 22px 70px rgba(15, 23, 42, 0.18);
      padding: 18px 18px 16px;
    }
    .modalHeader{
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
    }
    .modalHeader strong{
      font-size: 18px;
      letter-spacing: -0.01em;
    }
    .closeBtn{
      border: 1px solid rgba(15, 23, 42, 0.12);
      background: #fff;
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      font-family: "EB Garamond", Georgia, serif;
    }
    .modalBody{
      color: rgba(15, 23, 42, 0.84);
      font-size: 15px;
      line-height: 1.65;
    }

    @media (max-width: 700px){
      .controls{ grid-template-columns: 1fr; }
      .brand{ min-width: 0; }
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbarInner">
      <div class="brand">
        <small>SinePatre</small>
        <strong>Resource Navigator</strong>
      </div>
      <div class="topActions">
        <button id="infoBtn" class="btn">Info</button>
        <a class="btn danger" href="https://988lifeline.org" target="_blank" rel="noreferrer">Need help now</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <section class="hero" aria-label="Navigator header">
      <div class="heroTop">
        <div>
          <h1>Resource Navigator</h1>
          <p class="oneLine">Tell me what you want help with, I will return 1 to 3 best fit options with clear next steps.</p>
        </div>
      </div>

      <div class="controls" aria-label="Intake controls">
        <div class="field">
          <label for="age">Age range (optional)</label>
          <input id="age" inputmode="numeric" placeholder="Example: 13, 14-16, 17" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="clearBtn" class="btn">Clear chat</button>
        </div>
      </div>

      <div id="messages" class="messages" aria-live="polite" aria-label="Chat messages"></div>
    </section>
  </div>

  <div class="composerWrap">
    <div class="composer" role="group" aria-label="Message composer">
      <textarea id="input" placeholder="What do you need help with?" rows="1"></textarea>
      <button id="sendBtn" class="sendBtn" title="Send" aria-label="Send">
        <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </button>
    </div>
  </div>

  <div id="infoModal" class="modalOverlay" role="dialog" aria-modal="true" aria-label="About this tool">
    <div class="modal">
      <div class="modalHeader">
        <strong>About SinePatre Resource Navigator</strong>
        <button id="closeInfo" class="closeBtn">Close</button>
      </div>
      <div class="modalBody">
        This tool is built for fatherless teens who want practical support options that feel realistic in everyday life. The recommendations come from a curated database that is maintained ahead of time, not from browsing the internet in real time. When you write a message, the assistant uses your words to match you to resources in that database and explains the fit in plain language, with clear next steps. If you are in immediate danger or thinking about harming yourself, use the “Need help now” button to reach 988.
      </div>
    </div>
  </div>

  <script src="/navigator.js"></script>
</body>
</html>
